<!DOCTYPE html>
<html>
  <head>
    <title>Skillhive API Authentication &middot; Skillhive Developer Community</title>
    <meta charset="utf-8">
    <meta name="author" content="Intunex Oy">
    
                  
          <meta name="description" content="
    
        Authenticating Requests
        Generate Keys
        Forming a Request
        Examples
    


Authenticating Requests

Authentication ">    
        
        
    <link rel="shortcut icon" href="https://intunex.github.io/developer/favicon.ico" />

      <meta name="viewport" content="width=device-width, initial-scale=1.0">
          
      <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">
  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" rel="stylesheet">
  <link href="https://intunex.github.io/developer/css/main.css" rel="stylesheet">  
      </head>
  <body>
    <!-- Static top bar Main Menu -->
<div id="topbar">
  <div class="pure-menu pure-menu-open pure-menu-fixed pure-menu-horizontal">
    <a class="pure-menu-heading" href="https://intunex.github.io/developer">Skillhive Developers</a>

    <ul>
      <li  class="pure-menu-selected" ><a href="https://intunex.github.io/developer/api/v2/">API v2</a></li>
      <li ><a href="https://intunex.github.io/developer/api/">API v1</a></li>
      </ul>
    </div>
</div>

<div class="pure-g-r side-menu" id="layout">
  <!-- Responsive sidebar menu for API section -->
<a href="#menu" id="menuLink" class="pure-menu-link"><span></span></a>

<div class="pure-u" id="menu">
  <div class="pure-menu pure-menu-open">
      <ul>
          <li ><a href="https://intunex.github.io/developer/api/v2/">Introduction</a></li>
          <li  class="pure-menu-selected"><a href="https://intunex.github.io/developer/api/v2/authentication/">Authentication</a></li>
          <li ><a href="https://intunex.github.io/developer/api/v2/profile/">User Profiles</a></li>
          <li ><a href="https://intunex.github.io/developer/api/v2/work-experience/">Work experience</a></li>
          <li ><a href="https://intunex.github.io/developer/api/v2/education/">Education</a></li>
      </ul>
  </div>
</div>

  <div class="pure-u-1" id="main">
    <div class="header">
  <h1>Skillhive API Authentication</h1>
      <h2>Authentication</h2>
  </div>

    <div class="content">
      <div class="pure-menu pure-menu-open pure-menu-horizontal">
    <ul>
        <li><a href="#authentication">Authenticating Requests</a></li>
        <li><a href="#keys">Generate Keys</a></li>
        <li><a href="#request">Forming a Request</a></li>
        <li><a href="#examples">Examples</a></li>
    </ul>
</div>

<h2 id="authentication">Authenticating Requests</h2>

<p>Authentication is handled by some additional HTTP headers and signing the request
using RSA keys. In a nutshell, here's what you need to do:</p>

<ol>
<li>Generate a private RSA key</li>
<li>Generate a public RSA key based on the private key</li>
<li>Login to Skillhive and setup the api, upload the contents of the <em>public</em> key to Skillhive</li>
<li>Use the private key to sign requests to Skillhive API</li>
</ol>

<p>Here are the details.</p>

<h2 id="keys">Generate the RSA Keys</h2>

<p>The keys cannot be created in Skillhive and you need to create them yourself. It's pretty
straightforward at least in *NIX based systems.</p>

<h3>Step 1. Generate a private key</h3>

<p>First step is to generate a private key.</p>

<pre><code>$ openssl genrsa 2048 &gt; private_key.pem
</code></pre>

<p>This will create a file called <code>private_key.pem</code> which includes the private key. The
private key is used to create the signature for each request you make to Skillhive.</p>

<p><strong>NOTICE!</strong> Keep the private key to yourself and never ever upload it to Skillhive!</p>

<h3>Step 2. Generate a Public Key</h3>

<p>The public key is created based on the private key you created in step 1.</p>

<pre><code>$ openssl rsa -in private_key.pem -pubout -out public_key.pem
</code></pre>

<p>This will create a file called <code>public_key.pem</code> which includes the public that Skillhive
needs to verify the signature for each request.</p>

<h2 id="request">Forming a Request</h2>

<p>Some additional HTTP headers are required for each request you make to Skillhive API. The headers are</p>

<ul>
<li><code>Api-Id</code> This is the ID you get when you setup your api connection in Skillhive. Skillhive uses to this to
check where the connection is coming from.</li>
<li><code>Api-User</code> The email address of the user who is connecting to Skillhive (the "loggedin user"). Remember,
that different users have different access rights in Skillhive and the data they are able to view through
the api can be different for different users.</li>
<li><code>Api-Signature</code> The signature created using the private key.</li>
</ul>

<p>For each request Skillhive will check that</p>

<ol>
<li>Api keys matching <code>Api-Id</code> have been setup and are enabled,</li>
<li>The signature from <code>Api-Signature</code> matches the request,</li>
<li>A user account is found with the email address defined in <code>Api-User</code>.</li>
</ol>

<p>If any of these steps fails, Skillhive will return a response with error code <code>403</code>.</p>

<h3>Creating the Signature</h3>

<p>The signature is created from the Api-Id, user email address, the content of the request and the
requested url.</p>

<p>The signature is made from a string like this:</p>

<pre><code>{"url":"https://demo.skillhive.com/api/","content":"","api_id":"xasx7as87xash7978","user":"demouser@skillhive.com"}
</code></pre>

<p><strong>NOTICE!</strong> The header <code>Api-Signature</code> field contains the signature in <code>base64</code> encoded format.</p>

<h2 id="examples">Examples</h2>

<p>Here is an example how to create the signature using PHP. Let's assume we're trying to list all users in Skillhive
throught the api.</p>

<pre><code>// The data that we need for signing the request
$url     = "https://demo.skillhive.com/api/v2/users"; // List all users
$content = "";                                // Empty for GET requests
$api_id  = "c7ds89c7shc7ds98h98";             // A random Api-Id recieved from Skillhive
$user    = "testuser@demoskillhive.com";           // Email of "loggedin" user

$data = array(
    'url'     =&gt; $url,
    'content' =&gt; $content,
    'api_id'  =&gt; $api_id,
    'user'    =&gt; $user,
);        

// The data to sign is a json encoded string    
$data = json_encode($data);

// Create signature using the private key
$private_key = "-----BEGIN RSA PRIVATE KEY-----MIIEpAIBAAKCAQEAyUSQ3Jky....";
$signature   = "";

// Do the actual signing
openssl_sign($data, $signature, $private_key);

// Base64 encode signature
$signature = base64_encode($signature);

// Now $signature is ready to pass in the http headers
</code></pre>
    </div>
  </div> <!-- end div main -->
</div><!-- end div layout -->
    <div class="pure-g-r side-menu" id="footer">
    <div class="pure-u-1-2">
      &copy; Intunex Oy 2022
  </div><div class="pure-u-1-2">
              <div class="pull-right">
          Updated on 14 Nov 2017
        </div>
        </div>
</div>
    <script src="https://intunex.github.io/developer/js/main.js"></script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17540740-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
  </body>
</html>